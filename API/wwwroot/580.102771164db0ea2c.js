"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[580],{8580:(et,_,c)=>{c.r(_),c.d(_,{DoctorModule:()=>W});var p=c(9808),v=c(4466),a=c(4182),d=c(1498),b=c(2585),t=c(2096);let y=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-doctor"]],hostAttrs:[1,"grow","flex","flex-col"],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"router-outlet")},directives:[d.lC],styles:[""]}),i})();var g=c(425),m=c(3578),x=c(2388),h=c(7278),f=c(4696),C=c(5512),T=c(3213),w=c(1279);let Z=(()=>{class i{constructor(){this.activeChange=new t.vpe}ngOnInit(){}closeOverlay(){this.active=!1,this.activeChange.emit(this.active)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-phys-details"]],inputs:{active:"active",exam:"exam"},outputs:{activeChange:"activeChange"},decls:22,vars:3,consts:[[1,"absolute","top-0","left-0","w-full","h-full","backdrop-blur-sm","z-50","cursor-pointer",3,"click"],[1,"absolute","z-50","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","h-1/2","w-1/2","min-w-[35rem]","min-h-min","rounded-md","drop-shadow-lg","bg-gradient-to-b","from-slate-50","via-slate-100","to-blue-300"],[1,"flex","flex-col","w-full","h-full","p-5"],[1,"flex","w-full","justify-between"],[1,"mr-3"],[1,"w-full","grow","flex","items-end","justify-center"],[1,"basis-2/3"],["for","description"],["readonly","","id","description","rows","7","placeholder","Description",1,"w-full","resize-none","mb-2","bg-gray-200",3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return n.closeOverlay()}),t.qZA(),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"table")(5,"tr")(6,"td")(7,"span",4),t._uU(8,"Type:"),t.qZA()(),t.TgZ(9,"td"),t._uU(10),t.qZA()(),t.TgZ(11,"tr")(12,"td")(13,"span",4),t._uU(14,"ICD:"),t.qZA()(),t.TgZ(15,"td"),t._uU(16),t.qZA()()()(),t.TgZ(17,"div",5)(18,"div",6)(19,"label",7),t._uU(20,"Result:"),t.qZA(),t._UZ(21,"textarea",8),t.qZA()()()()),2&e&&(t.xp6(10),t.Oqu(n.exam.examinationListDTO.name),t.xp6(6),t.Oqu(n.exam.examinationListDTO.icd),t.xp6(5),t.Q6J("value",n.exam.results))},styles:[""]}),i})();function A(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"li")(1,"button",19),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).onSelect(s)}),t._uU(2),t.qZA()()}if(2&i){const e=l.$implicit;t.xp6(2),t.AsE(" ",e.icd," ",e.name," ")}}function D(i,l){if(1&i&&(t.TgZ(0,"ul",17),t.YNc(1,A,3,2,"li",18),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.types)}}let V=(()=>{class i{constructor(e){this.es=e,this.activeChange=new t.vpe,this.stateChanged=new t.vpe,this.dropdownVisibility=!1,this.types=null,this.chosenType=null,this.form=new a.cw({type:new a.NI(null,a.kI.required),notes:new a.NI(null,a.kI.required)})}ngOnInit(){}sendExamination(){this.form.valid&&null!=this.chosenType&&this.es.addVisitLaboratory(this.visitID,this.form.controls.notes.value,this.chosenType.id).subscribe(e=>{e&&(this.stateChanged.emit(!0),this.closeOverlay())})}closeOverlay(){this.active=!1,this.activeChange.emit(this.active)}onSelect(e){this.chosenType=e,this.form.controls.type.setValue(this.chosenType.name),this.dropdownVisibility=!1}search(e){e=e.toString(),this.es.labTypeSearch(e).subscribe(n=>{this.types=n})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.C))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-lab-create"]],inputs:{active:"active",visitID:"visitID"},outputs:{activeChange:"activeChange",stateChanged:"stateChanged"},decls:22,vars:2,consts:[[1,"absolute","top-0","left-0","w-full","h-full","backdrop-blur-sm","z-50","cursor-pointer",3,"click"],[1,"absolute","z-50","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","h-[70%]","w-1/2","min-w-[35rem]","min-h-min","rounded-md","drop-shadow-lg","bg-gradient-to-b","from-slate-50","via-slate-100","to-blue-300"],[1,"flex","flex-col","w-full","h-full","p-5"],[1,"text-lg","font-medium"],[1,"w-full","grow","flex","flex-col","items-center","justify-center"],[1,"w-full","mt-20"],[3,"formGroup"],[1,"mb-5"],["for","type"],[1,"inline","relative"],["id","type","placeholder","Search...","formControlName","type",1,"bg-gray-200","p-1","w-52","text-left","placeholder-gray-500",3,"keyup.enter","click"],["searchBox",""],["class","absolute origin-top-left left-0 z-20 bg-white p-1 divide-y w-72 max-h-44 overflow-y-auto",4,"ngIf"],["for","notes"],["id","notes","rows","7","placeholder","Notes for the laboratory","formControlName","notes",1,"w-full","resize-none","mb-2","bg-gray-200"],[1,"grow"],["type","button",1,"ml-8","mb-2","font-semibold","text-white","bg-blue-600","px-6","py-2","rounded-lg","hover:bg-blue-700","active:bg-blue-800",3,"click"],[1,"absolute","origin-top-left","left-0","z-20","bg-white","p-1","divide-y","w-72","max-h-44","overflow-y-auto"],[4,"ngFor","ngForOf"],["type","button",1,"hover:bg-gray-200","active:bg-gray-300","w-full","text-left","p-1",3,"click"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",0),t.NdJ("click",function(){return n.closeOverlay()}),t.qZA(),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4,"Add Laboratory Examination"),t.qZA(),t.TgZ(5,"div",4)(6,"div",5)(7,"form",6)(8,"div",7)(9,"label",8),t._uU(10,"Type: "),t.qZA(),t.TgZ(11,"div",9)(12,"input",10,11),t.NdJ("keyup.enter",function(){t.CHM(o);const r=t.MAs(13);return n.search(r.value)})("click",function(){return n.dropdownVisibility=!n.dropdownVisibility}),t.qZA(),t.YNc(14,D,2,1,"ul",12),t.qZA()(),t.TgZ(15,"div")(16,"label",13),t._uU(17,"Doctor's notes:"),t.qZA(),t._UZ(18,"textarea",14),t.qZA()()(),t._UZ(19,"div",15),t.TgZ(20,"button",16),t.NdJ("click",function(){return n.sendExamination()}),t._uU(21,"Submit"),t.qZA()()()()}2&e&&(t.xp6(7),t.Q6J("formGroup",n.form),t.xp6(7),t.Q6J("ngIf",n.dropdownVisibility))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,p.O5,p.sg],styles:[""]}),i})();function J(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"li")(1,"button",19),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).onSelect(s)}),t._uU(2),t.qZA()()}if(2&i){const e=l.$implicit;t.xp6(2),t.AsE(" ",e.icd," ",e.name," ")}}function k(i,l){if(1&i&&(t.TgZ(0,"ul",17),t.YNc(1,J,3,2,"li",18),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.types)}}let N=(()=>{class i{constructor(e){this.es=e,this.activeChange=new t.vpe,this.stateChanged=new t.vpe,this.dropdownVisibility=!1,this.types=null,this.chosenType=null,this.form=new a.cw({type:new a.NI(null,a.kI.required),desc:new a.NI(null,a.kI.required)})}ngOnInit(){}sendExamination(){this.form.valid&&null!=this.chosenType&&this.es.addVisitPhysical(this.visitID,this.form.controls.desc.value,this.chosenType.id).subscribe(e=>{e&&(this.stateChanged.emit(!0),this.closeOverlay())})}closeOverlay(){this.active=!1,this.activeChange.emit(this.active)}onSelect(e){this.chosenType=e,this.form.controls.type.setValue(this.chosenType.name),this.dropdownVisibility=!1}search(e){e=e.toString(),this.es.physTypeSearch(e).subscribe(n=>{this.types=n})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.C))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-phys-create"]],inputs:{active:"active",visitID:"visitID"},outputs:{activeChange:"activeChange",stateChanged:"stateChanged"},decls:22,vars:2,consts:[[1,"absolute","top-0","left-0","w-full","h-full","backdrop-blur-sm","z-50","cursor-pointer",3,"click"],[1,"absolute","z-50","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","h-[70%]","w-1/2","min-w-[35rem]","min-h-min","rounded-md","drop-shadow-lg","bg-gradient-to-b","from-slate-50","via-slate-100","to-blue-300"],[1,"flex","flex-col","w-full","h-full","p-5"],[1,"text-lg","font-medium"],[1,"w-full","grow","flex","flex-col","items-center","justify-center"],[1,"w-full","mt-20"],[3,"formGroup"],[1,"mb-5"],["for","type"],[1,"inline","relative"],["id","type","placeholder","Search...","formControlName","type",1,"bg-gray-200","p-1","w-52","text-left","placeholder-gray-500",3,"keyup.enter","click"],["searchBox",""],["class","absolute origin-top-left left-0 z-20 bg-white p-1 divide-y w-72 max-h-44 overflow-y-auto",4,"ngIf"],["for","description"],["id","description","rows","7","placeholder","Examination result","formControlName","desc",1,"w-full","resize-none","mb-2","bg-gray-200"],[1,"grow"],["type","button",1,"ml-8","mb-2","font-semibold","text-white","bg-blue-600","px-6","py-2","rounded-lg","hover:bg-blue-700","active:bg-blue-800",3,"click"],[1,"absolute","origin-top-left","left-0","z-20","bg-white","p-1","divide-y","w-72","max-h-44","overflow-y-auto"],[4,"ngFor","ngForOf"],["type","button",1,"hover:bg-gray-200","active:bg-gray-300","w-full","text-left","p-1",3,"click"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",0),t.NdJ("click",function(){return n.closeOverlay()}),t.qZA(),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4,"Add Physical Examination"),t.qZA(),t.TgZ(5,"div",4)(6,"div",5)(7,"form",6)(8,"div",7)(9,"label",8),t._uU(10,"Type: "),t.qZA(),t.TgZ(11,"div",9)(12,"input",10,11),t.NdJ("keyup.enter",function(){t.CHM(o);const r=t.MAs(13);return n.search(r.value)})("click",function(){return n.dropdownVisibility=!n.dropdownVisibility}),t.qZA(),t.YNc(14,k,2,1,"ul",12),t.qZA()(),t.TgZ(15,"div")(16,"label",13),t._uU(17,"Result:"),t.qZA(),t._UZ(18,"textarea",14),t.qZA()()(),t._UZ(19,"div",15),t.TgZ(20,"button",16),t.NdJ("click",function(){return n.sendExamination()}),t._uU(21,"Submit"),t.qZA()()()()}2&e&&(t.xp6(7),t.Q6J("formGroup",n.form),t.xp6(7),t.Q6J("ngIf",n.dropdownVisibility))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,p.O5,p.sg],styles:[""]}),i})();function q(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).addPhysOverlay()}),t._uU(1,"+ Add physical examination"),t.qZA()}}function O(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",33)(1,"span",34),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"button",35),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).openPhysDetails(s)}),t._uU(6,"Details"),t.qZA()()}if(2&i){const e=l.$implicit;t.xp6(2),t.Oqu(e.examinationListDTO.name),t.xp6(2),t.Oqu(e.results)}}function U(i,l){if(1&i&&(t.TgZ(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29),t.YNc(4,q,2,0,"button",30),t.qZA(),t.YNc(5,O,7,2,"div",31),t.qZA()()()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.isModifiable),t.xp6(1),t.Q6J("ngForOf",e.physicalExams)}}function I(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",39)(1,"span",34),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"button",35),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).openLabDetails(s)}),t._uU(6,"Details"),t.qZA()()}if(2&i){const e=l.$implicit;t.xp6(2),t.Oqu(e.examination.name),t.xp6(2),t.Oqu(e.doctorNotes)}}function F(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",26)(1,"div",36)(2,"div",28)(3,"div",29)(4,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw().addLabOverlay()}),t._uU(5,"+ Add laboratory examination"),t.qZA()(),t.YNc(6,I,7,2,"div",38),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(6),t.Q6J("ngForOf",e.laboratoryExams)}}function E(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw().finalizeVisit()}),t._uU(1,"Finish"),t.qZA()}}function M(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancelVisit()}),t._uU(1,"Cancel"),t.qZA()}}function Q(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"app-lab-details",42),t.NdJ("activeChange",function(o){return t.CHM(e),t.oxw().labOverlayActive=o}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("active",e.labOverlayActive)("exam",e.selectedLabExamination)("editable",!1)}}function L(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"app-phys-details",43),t.NdJ("activeChange",function(o){return t.CHM(e),t.oxw().physOverlayActive=o}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("active",e.physOverlayActive)("exam",e.selectedPhysExamination)}}function Y(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"app-lab-create",44),t.NdJ("activeChange",function(o){return t.CHM(e),t.oxw().addLabOverlayActive=o})("stateChanged",function(){return t.CHM(e),t.oxw().getExaminations()}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("active",e.addLabOverlayActive)("visitID",e.visit.id)}}function P(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"app-phys-create",44),t.NdJ("activeChange",function(o){return t.CHM(e),t.oxw().addPhysOverlayActive=o})("stateChanged",function(){return t.CHM(e),t.oxw().getExaminations()}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("active",e.addPhysOverlayActive)("visitID",e.visit.id)}}let z=(()=>{class i{constructor(e,n,o,s,r,u){this.vs=e,this.es=n,this.ps=o,this.us=s,this.route=r,this.location=u,this.selectedTab="phys"}ngOnInit(){let e=Number(this.route.snapshot.paramMap.get("id"));this.vs.getVisit(e).subscribe(n=>{this.visit=n,this.isModifiable=0==this.visit.status,this.visit.finalizationTime=this.us.localizeDate(this.visit.finalizationTime),this.visit.registrationTime=this.us.localizeDate(this.visit.registrationTime),this.visit.visitTime=this.us.localizeDate(this.visit.visitTime),this.ps.getPatientDetails(null==n?void 0:n.patientId).subscribe(o=>this.patient=o),this.vs.getPatientVisitsList(null==n?void 0:n.patientId).subscribe(o=>{this.patientVisits=o,this.patientVisits.forEach((s,r,u)=>{u[r].date=this.us.localizeDate(s.date)})}),this.getExaminations()})}getExaminations(){this.es.getVisitPhysicals(this.visit.id).subscribe(e=>{this.physicalExams=e}),this.es.getVisitLaboratory(this.visit.id).subscribe(e=>{this.laboratoryExams=e,this.laboratoryExams.forEach((n,o,s)=>{s[o].executionDate=s[o].executionDate?this.us.localizeDate(n.executionDate):null,s[o].orderDate=this.us.localizeDate(n.orderDate)})})}openPhysDetails(e){this.selectedPhysExamination=e,this.physOverlayActive=!0}addPhysOverlay(){this.addPhysOverlayActive=!0}openLabDetails(e){this.selectedLabExamination=e,this.labOverlayActive=!0}addLabOverlay(){this.addLabOverlayActive=!0}goBack(){this.location.back()}selectTab(e){this.selectedTab=e}cancelVisit(){this.vs.cancelVisit(this.visit),this.goBack()}finalizeVisit(){this.vs.finishVisit(this.visit),this.goBack()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(g.F),t.Y36(m.C),t.Y36(x.$),t.Y36(h.t),t.Y36(d.gz),t.Y36(p.Ye))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-visit-detail"]],hostAttrs:[1,"grow","flex","flex-col"],decls:36,vars:20,consts:[[3,"title"],[1,"grow","flex","w-full"],[1,"flex","flex-col","h-full","grow","border-r","border-gray-200"],[1,"border-b","border-gray-200"],[3,"chosenPatientData"],[1,"grow","w-full","flex"],[3,"visits"],[1,"flex","flex-col","h-full","grow","p-6","space-y-4"],[1,"text-2xl","font-medium"],["for","description"],["id","description","rows","7","placeholder","Description",1,"w-full","resize-none","mb-2","bg-gray-200",3,"readonly","ngModel","ngModelChange"],["for","diagnosis"],["id","diagnosis","rows","5","placeholder","Diagnosis",1,"w-full","resize-none","bg-gray-200",3,"readonly","ngModel","ngModelChange"],[1,"grow","flex","flex-col"],[1,"flex","justify-center","w-full","space-x-6"],["type","button",1,"font-semibold","text-white","bg-gray-500","px-6","py-2","rounded-t-lg","hover:bg-gray-700","active:bg-gray-800",3,"click"],[3,"ngSwitch"],["class","grow w-full flex flex-col",4,"ngSwitchCase"],[1,"flex","justify-between"],["type","button",1,"font-semibold","text-white","bg-gray-500","px-6","py-2","rounded-lg","hover:bg-gray-700","active:bg-gray-800",3,"click"],[1,"flex","space-x-6","ml-16"],["type","submit","class","font-semibold text-white bg-blue-600 px-6 py-2 rounded-lg hover:bg-blue-700 active:bg-blue-800",3,"click",4,"ngIf"],["type","button","class","font-semibold text-white bg-red-600 px-6 py-2 rounded-lg hover:bg-red-700 active:bg-red-800",3,"click",4,"ngIf"],[3,"active","exam","editable","activeChange",4,"ngIf"],[3,"active","exam","activeChange",4,"ngIf"],[3,"active","visitID","activeChange","stateChanged",4,"ngIf"],[1,"grow","w-full","flex","flex-col"],[1,"grow","w-full","relative","z-0"],[1,"absolute","top-0","left-0","w-full"],[1,"w-full","flex","justify-center"],["type","submit","class","font-semibold text-white bg-blue-600 my-2 px-6 py-2 rounded-lg hover:bg-blue-700 active:bg-blue-800",3,"click",4,"ngIf"],["class","my-3 divide-y",4,"ngFor","ngForOf"],["type","submit",1,"font-semibold","text-white","bg-blue-600","my-2","px-6","py-2","rounded-lg","hover:bg-blue-700","active:bg-blue-800",3,"click"],[1,"my-3","divide-y"],[1,"w-32","mr-10"],["type","button",1,"float-right","font-semibold","text-white","bg-blue-600","px-3","rounded-lg","hover:bg-blue-700","active:bg-blue-800",3,"click"],[1,"grow","w-full","overflow-y-auto","relative"],["type","button",1,"font-semibold","text-white","bg-blue-600","my-2","px-6","py-2","rounded-lg","hover:bg-blue-700","active:bg-blue-800",3,"click"],["class","my-3 divide-y w-full",4,"ngFor","ngForOf"],[1,"my-3","divide-y","w-full"],["type","submit",1,"font-semibold","text-white","bg-blue-600","px-6","py-2","rounded-lg","hover:bg-blue-700","active:bg-blue-800",3,"click"],["type","button",1,"font-semibold","text-white","bg-red-600","px-6","py-2","rounded-lg","hover:bg-red-700","active:bg-red-800",3,"click"],[3,"active","exam","editable","activeChange"],[3,"active","exam","activeChange"],[3,"active","visitID","activeChange","stateChanged"]],template:function(e,n){1&e&&(t._UZ(0,"app-navbar",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"app-patient-data",4),t.qZA(),t.TgZ(5,"div",5),t._UZ(6,"app-patient-visits",6),t.qZA()(),t.TgZ(7,"div",7)(8,"h3",8),t._uU(9,"Visit Details"),t.qZA(),t.TgZ(10,"div")(11,"label",9),t._uU(12,"Description:"),t.qZA(),t.TgZ(13,"textarea",10),t.NdJ("ngModelChange",function(s){return n.visit.description=s}),t.qZA(),t.TgZ(14,"label",11),t._uU(15,"Diagnosis:"),t.qZA(),t.TgZ(16,"textarea",12),t.NdJ("ngModelChange",function(s){return n.visit.diagnosis=s}),t.qZA()(),t.TgZ(17,"div",13)(18,"div",14)(19,"button",15),t.NdJ("click",function(){return n.selectTab("phys")}),t._uU(20,"Physical Examinations"),t.qZA(),t.TgZ(21,"button",15),t.NdJ("click",function(){return n.selectTab("lab")}),t._uU(22,"Laboratory Examinations"),t.qZA()(),t.ynx(23,16),t.YNc(24,U,6,2,"div",17),t.YNc(25,F,7,1,"div",17),t.BQk(),t.qZA(),t.TgZ(26,"div",18)(27,"button",19),t.NdJ("click",function(){return n.goBack()}),t._uU(28,"Back"),t.qZA(),t.TgZ(29,"div",20),t.YNc(30,E,2,0,"button",21),t.YNc(31,M,2,0,"button",22),t.qZA()()()(),t.YNc(32,Q,1,3,"app-lab-details",23),t.YNc(33,L,1,2,"app-phys-details",24),t.YNc(34,Y,1,2,"app-lab-create",25),t.YNc(35,P,1,2,"app-phys-create",25)),2&e&&(t.Q6J("title","chosen visit"),t.xp6(4),t.Q6J("chosenPatientData",n.patient),t.xp6(2),t.Q6J("visits",n.patientVisits),t.xp6(7),t.Q6J("readonly",!n.isModifiable)("ngModel",n.visit.description),t.xp6(3),t.Q6J("readonly",!n.isModifiable)("ngModel",n.visit.diagnosis),t.xp6(3),t.ekj("bg-gray-700","phys"===n.selectedTab),t.xp6(2),t.ekj("bg-gray-700","lab"===n.selectedTab),t.xp6(2),t.Q6J("ngSwitch",n.selectedTab),t.xp6(1),t.Q6J("ngSwitchCase","phys"),t.xp6(1),t.Q6J("ngSwitchCase","lab"),t.xp6(5),t.Q6J("ngIf",n.isModifiable),t.xp6(1),t.Q6J("ngIf",n.isModifiable),t.xp6(1),t.Q6J("ngIf",n.labOverlayActive),t.xp6(1),t.Q6J("ngIf",n.physOverlayActive),t.xp6(1),t.Q6J("ngIf",n.addLabOverlayActive),t.xp6(1),t.Q6J("ngIf",n.addPhysOverlayActive))},directives:[f.S,C.e,T.c,a.Fj,a.JJ,a.On,p.RF,p.n9,p.O5,p.sg,w.t,Z,V,N],styles:[""]}),i})();var S=c(1816),j=c(8031);function H(i,l){1&i&&(t.TgZ(0,"div"),t._uU(1," Select Date "),t.qZA())}function $(i,l){if(1&i&&(t.TgZ(0,"div",null,12),t._uU(2),t.qZA()),2&i){const e=t.oxw(2);let n;t.xp6(2),t.hij(" No such visits for ",e.us.prettyDateFromDate(null==(n=e.form.get("date"))?null:n.value)," ")}}function B(i,l){if(1&i&&t.YNc(0,$,3,1,"div",15),2&i){const e=t.oxw();t.Q6J("ngIf",0==e.list.length)}}function G(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"li",16)(1,"div",17),t._uU(2),t.qZA(),t.TgZ(3,"div",17),t._uU(4),t.qZA(),t.TgZ(5,"div",17),t._uU(6),t.qZA(),t.TgZ(7,"div",17)(8,"button",18),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().selectVisit(s)}),t._uU(9),t.qZA()()()}if(2&i){const e=l.$implicit,n=t.oxw();t.xp6(2),t.Oqu(n.us.prettyTimeFromDate(e.date)),t.xp6(2),t.Oqu(e.patientName),t.xp6(2),t.Oqu(n.us.statusToText(e.status)),t.xp6(3),t.Oqu(0==e.status?"Begin":"Details")}}const X=[{path:"",component:y,children:[{path:"visit/:id",component:z},{path:"visits",component:(()=>{class i{constructor(e,n,o,s,r){this.vs=e,this.as=n,this.us=o,this.router=s,this.route=r,this.form=new a.cw({filter:new a.NI(-1,a.kI.required),date:new a.NI})}ngOnInit(){this.as.currentUser$.subscribe(e=>this.doctorID=Number((0,S.Z)(null==e?void 0:e.token).UserId)),this.getAllVisits()}formChanged(){var e;null!=(null===(e=this.form.get("date"))||void 0===e?void 0:e.value)?(console.log("With date running"),this.getList()):(console.log("Without date"),this.getAllVisits())}getList(){var e,n,o,s;this.form.valid&&(this.vs.getDoctorVisitsList(this.doctorID,new Date(null===(e=this.form.get("date"))||void 0===e?void 0:e.value),null===(n=this.form.get("filter"))||void 0===n?void 0:n.value).subscribe(r=>{this.list=r,this.list.forEach((u,K,tt)=>{tt[K].date=this.us.localizeDate(u.date)})},r=>console.error(r)),console.log(`Getting elements for date ${null===(o=this.form.get("date"))||void 0===o?void 0:o.value} and filter ${null===(s=this.form.get("filter"))||void 0===s?void 0:s.value}`))}getAllVisits(){var e,n;this.vs.getDoctorVisitsList(this.doctorID,null,null===(e=this.form.get("filter"))||void 0===e?void 0:e.value).subscribe(o=>{this.list=o,this.list.forEach((s,r,u)=>{u[r].date=this.us.localizeDate(s.date)})},o=>console.error(o)),console.log(`Getting all elements for filter ${null===(n=this.form.get("filter"))||void 0===n?void 0:n.value}`)}selectVisit(e){this.router.navigate([`visit/${e.id}`],{relativeTo:this.route.parent})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(g.F),t.Y36(j.B),t.Y36(h.t),t.Y36(d.F0),t.Y36(d.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-visits"]],hostAttrs:[1,"grow","flex","flex-col"],decls:33,vars:9,consts:[[3,"title"],[1,"p-10","grow","flex","flex-col"],[1,"w-full"],[1,"flex","items-baseline",3,"formGroup","change"],[1,"mr-10","space-x-2"],["required","","type","date","min","01-01-2021","placeholder","today","formControlName","date",1,"bg-gray-200","p-1"],["for","radios",1,"mr-2"],["id","radios",1,"space-x-2"],["checked","","type","radio","formControlName","filter",3,"value"],["type","radio","formControlName","filter",3,"value"],[1,"mt-4","grow","w-full","overflow-y-auto","relative"],[4,"ngIf","ngIfElse"],["listNotNull",""],[1,"absolute","top-0","left-0","w-full","divide-y"],["class","flex items-baseline py-2 w-full",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"flex","items-baseline","py-2","w-full"],[1,"w-1/4","min-w-fit","px-1"],["type","button",1,"float-right","font-semibold","text-white","bg-blue-600","px-3","rounded-lg","hover:bg-blue-700","active:bg-blue-800",3,"click"]],template:function(e,n){if(1&e&&(t._UZ(0,"app-navbar",0),t.TgZ(1,"div",1)(2,"div",2)(3,"form",3),t.NdJ("change",function(){return n.formChanged()}),t.TgZ(4,"label",4)(5,"span"),t._uU(6,"Date:"),t.qZA(),t._UZ(7,"input",5),t.qZA(),t.TgZ(8,"label",6),t._uU(9,"Filter:"),t.qZA(),t.TgZ(10,"fieldset",7)(11,"label"),t._UZ(12,"input",8),t.TgZ(13,"span"),t._uU(14," All"),t.qZA()(),t.TgZ(15,"label"),t._UZ(16,"input",9),t.TgZ(17,"span"),t._uU(18," Upcoming"),t.qZA()(),t.TgZ(19,"label"),t._UZ(20,"input",9),t.TgZ(21,"span"),t._uU(22," Cancelled"),t.qZA()(),t.TgZ(23,"label"),t._UZ(24,"input",9),t.TgZ(25,"span"),t._uU(26," Finished"),t.qZA()()()()(),t.TgZ(27,"div",10),t.YNc(28,H,2,0,"div",11),t.YNc(29,B,1,1,"ng-template",null,12,t.W1O),t.TgZ(31,"ul",13),t.YNc(32,G,10,4,"li",14),t.qZA()()()),2&e){const o=t.MAs(30);t.Q6J("title","planned visits"),t.xp6(3),t.Q6J("formGroup",n.form),t.xp6(9),t.Q6J("value",-1),t.xp6(4),t.Q6J("value",0),t.xp6(4),t.Q6J("value",2),t.xp6(4),t.Q6J("value",3),t.xp6(4),t.Q6J("ngIf",!n.list)("ngIfElse",o),t.xp6(4),t.Q6J("ngForOf",n.list)}},directives:[f.S,a._Y,a.JL,a.sg,a.Fj,a.Q7,a.JJ,a.u,a._,p.O5,p.sg],styles:[""]}),i})()},{path:"**",component:b.J}]}];let R=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.Bz.forChild(X)],d.Bz]}),i})(),W=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[p.ez,a.UX,a.u5,R,v.m]]}),i})()}}]);