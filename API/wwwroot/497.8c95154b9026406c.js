"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[497],{4220:(x,_,s)=>{s.r(_),s.d(_,{LabModule:()=>F});var i=s(9808),a=s(4182),f=s(1498),e=s(2096);let m=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-lab"]],hostAttrs:[1,"grow","flex","flex-col"],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},directives:[f.lC],styles:[""]}),o})();var l=s(2585),c=s(3578),d=s(7278),v=s(4696),T=s(1279);function C(o,r){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&o){const t=e.oxw();let n;e.xp6(1),e.hij(" No such examinations for ",t.us.labStatusToText(null==(n=t.form.get("filter"))?null:n.value)," ")}}function Z(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"li",12)(1,"div",13),e._uU(2),e.qZA(),e.TgZ(3,"div",13),e._uU(4),e.qZA(),e.TgZ(5,"div",13),e._uU(6),e.qZA(),e.TgZ(7,"div",13)(8,"button",14),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw().selectExamination(p)}),e._uU(9),e.qZA()()()}if(2&o){const t=r.$implicit,n=e.oxw();e.xp6(2),e.Oqu(n.us.prettyTimeFromDate(t.orderDate)),e.xp6(2),e.Oqu(t.doctorNotes?t.doctorNotes:"No notes"),e.xp6(2),e.Oqu(t.examination.name),e.xp6(3),e.Oqu(2==t.status?"Begin":"Details")}}function y(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"app-lab-details",15),e.NdJ("activeChange",function(u){return e.CHM(t),e.oxw().overlayActive=u})("statusChange",function(){return e.CHM(t),e.oxw().getList()}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("active",t.overlayActive)("exam",t.selectedExamination)("editable",!0)}}let A=(()=>{class o{constructor(t,n){this.es=t,this.us=n,this.overlayActive=!1,this.form=new a.cw({filter:new a.NI(0,a.kI.required)})}ngOnInit(){this.form.controls.filter.setValue(2,{onlySelf:!0}),this.form.controls.filter.updateValueAndValidity(),this.getList()}getList(){var t,n,u;this.form.valid&&(this.es.getLabExams(null===(t=this.form.get("filter"))||void 0===t?void 0:t.value).subscribe(p=>{this.examinations=p.reverse(),this.examinations.forEach((g,h,b)=>{b[h].orderDate=this.us.localizeDate(g.orderDate),g.executionDate&&(b[h].executionDate=this.us.localizeDate(g.orderDate))})}),console.log(`Getting elements for date ${null===(n=this.form.get("date"))||void 0===n?void 0:n.value} and filter ${null===(u=this.form.get("filter"))||void 0===u?void 0:u.value}`))}selectExamination(t){this.selectedExamination=t,this.overlayActive=!0}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.C),e.Y36(d.t))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-supervisor"]],hostAttrs:[1,"grow","flex","flex-col"],decls:24,vars:8,consts:[[3,"title"],[1,"p-10","grow","flex","flex-col"],[1,"w-full"],[1,"flex","items-baseline",3,"formGroup","change"],["for","radios",1,"mr-2"],["id","radios",1,"space-x-2"],["type","radio","formControlName","filter",3,"value"],[1,"mt-4","grow","w-full","overflow-y-auto","relative"],[4,"ngIf"],[1,"absolute","top-0","left-0","w-full","divide-y"],["class","flex items-baseline py-2 w-full",4,"ngFor","ngForOf"],[3,"active","exam","editable","activeChange","statusChange",4,"ngIf"],[1,"flex","items-baseline","py-2","w-full"],[1,"w-1/4","min-w-fit","px-1"],["type","button",1,"float-right","font-semibold","text-white","bg-blue-600","px-3","rounded-lg","hover:bg-blue-700","active:bg-blue-800",3,"click"],[3,"active","exam","editable","activeChange","statusChange"]],template:function(t,n){1&t&&(e._UZ(0,"app-navbar",0),e.TgZ(1,"div",1)(2,"div",2)(3,"form",3),e.NdJ("change",function(){return n.getList()}),e.TgZ(4,"label",4),e._uU(5,"Filter:"),e.qZA(),e.TgZ(6,"fieldset",5)(7,"label"),e._UZ(8,"input",6),e.TgZ(9,"span"),e._uU(10," Awaiting Approval"),e.qZA()(),e.TgZ(11,"label"),e._UZ(12,"input",6),e.TgZ(13,"span"),e._uU(14," Cancelled"),e.qZA()(),e.TgZ(15,"label"),e._UZ(16,"input",6),e.TgZ(17,"span"),e._uU(18," Finished"),e.qZA()()()()(),e.TgZ(19,"div",7),e.YNc(20,C,2,1,"div",8),e.TgZ(21,"ul",9),e.YNc(22,Z,10,4,"li",10),e.qZA()()(),e.YNc(23,y,1,3,"app-lab-details",11)),2&t&&(e.Q6J("title","laboratory examinations"),e.xp6(3),e.Q6J("formGroup",n.form),e.xp6(5),e.Q6J("value",2),e.xp6(4),e.Q6J("value",3),e.xp6(4),e.Q6J("value",4),e.xp6(4),e.Q6J("ngIf",n.examinations&&0==n.examinations.length),e.xp6(2),e.Q6J("ngForOf",n.examinations),e.xp6(1),e.Q6J("ngIf",n.overlayActive))},directives:[v.S,a._Y,a.JL,a.sg,a._,a.Fj,a.JJ,a.u,i.O5,i.sg,T.t],styles:[""]}),o})();function D(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveChanges(2)}),e._uU(1,"Submit"),e.qZA()}}function w(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveChanges(3)}),e._uU(1,"Cancel"),e.qZA()}}let U=(()=>{class o{constructor(t,n){this.es=t,this.us=n,this.activeChange=new e.vpe,this.statusChange=new e.vpe,this.cancellationNotes=null}ngOnInit(){this.labNotes=3==this.exam.status?this.exam.cancelationReason:this.exam.labNotes}saveChanges(t){null!=this.labNotes&&this.labNotes.length>0?3==t?confirm("Please confirm this action.")&&this.es.postLabExam(this.exam.id,null,this.labNotes,t).subscribe(n=>{n&&(this.statusChange.emit(!0),this.closeOverlay())}):this.es.postLabExam(this.exam.id,this.labNotes,null,t).subscribe(n=>{n&&(this.statusChange.emit(!0),this.closeOverlay())}):alert("Please fill notes.")}closeOverlay(){this.active=!1,this.activeChange.emit(this.active)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.C),e.Y36(d.t))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-lab-tech-details"]],hostAttrs:[1,"absolute","top-0","left-0","w-full","h-full","z-50"],inputs:{active:"active",exam:"exam",editable:"editable"},outputs:{activeChange:"activeChange",statusChange:"statusChange"},decls:52,vars:14,consts:[[1,"absolute","top-0","left-0","w-full","h-full","backdrop-blur-sm","z-50","cursor-pointer",3,"click"],[1,"absolute","z-50","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","h-1/2","w-1/2","min-w-[35rem]","min-h-min","rounded-md","drop-shadow-lg","bg-gradient-to-b","from-slate-50","via-slate-100","to-blue-300"],[1,"flex","flex-col","w-full","h-full","p-5"],[1,"flex","w-full","justify-between"],[1,"mr-3"],[1,"w-full","grow","flex","items-end","justify-center","overflow-y-auto"],[1,"basis-2/3"],["for","description"],["readonly","","id","description","rows","5","placeholder","Description",1,"w-full","resize-none","mb-2","bg-gray-200",3,"value"],["for","result"],["id","result","rows","5","placeholder","Result or reason of cancellation",1,"w-full","resize-none","bg-gray-200",3,"readonly","ngModel","ngModelChange"],["type","button","class","ml-8 mb-2 font-semibold text-white bg-blue-600 px-6 py-2 rounded-lg hover:bg-blue-700 active:bg-blue-800",3,"click",4,"ngIf"],["type","button","class","ml-8 mb-2 font-semibold text-white bg-red-600 px-6 py-2 rounded-lg hover:bg-red-700 active:bg-red-800",3,"click",4,"ngIf"],["type","button",1,"ml-8","mb-2","font-semibold","text-white","bg-blue-600","px-6","py-2","rounded-lg","hover:bg-blue-700","active:bg-blue-800",3,"click"],["type","button",1,"ml-8","mb-2","font-semibold","text-white","bg-red-600","px-6","py-2","rounded-lg","hover:bg-red-700","active:bg-red-800",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return n.closeOverlay()}),e.qZA(),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"table")(5,"tr")(6,"td")(7,"span",4),e._uU(8,"Requested on:"),e.qZA()(),e.TgZ(9,"td"),e._uU(10),e.qZA()(),e.TgZ(11,"tr")(12,"td")(13,"span",4),e._uU(14,"Finalized on:"),e.qZA()(),e.TgZ(15,"td"),e._uU(16),e.qZA()(),e.TgZ(17,"tr")(18,"td")(19,"span",4),e._uU(20,"Type:"),e.qZA()(),e.TgZ(21,"td"),e._uU(22),e.qZA()()(),e.TgZ(23,"table")(24,"tr")(25,"td")(26,"span",4),e._uU(27,"Status:"),e.qZA()(),e.TgZ(28,"td"),e._uU(29),e.qZA()(),e.TgZ(30,"tr")(31,"td")(32,"span",4),e._uU(33,"Technician:"),e.qZA()(),e.TgZ(34,"td"),e._uU(35),e.qZA()(),e.TgZ(36,"tr")(37,"td")(38,"span",4),e._uU(39,"Supervisor:"),e.qZA()(),e.TgZ(40,"td"),e._uU(41),e.qZA()()()(),e.TgZ(42,"div",5)(43,"div",6)(44,"label",7),e._uU(45,"Doctor's Notes:"),e.qZA(),e._UZ(46,"textarea",8),e.TgZ(47,"label",9),e._uU(48),e.qZA(),e.TgZ(49,"textarea",10),e.NdJ("ngModelChange",function(p){return n.labNotes=p}),e.qZA()(),e.YNc(50,D,2,0,"button",11),e.YNc(51,w,2,0,"button",12),e.qZA()()()),2&t&&(e.xp6(10),e.AsE("",n.us.prettyDateFromDate(n.exam.orderDate)," ",n.us.prettyTimeFromDate(n.exam.orderDate),""),e.xp6(6),e.AsE("",n.exam.executionDate?n.us.prettyDateFromDate(n.exam.executionDate):"N/A"," ",n.exam.executionDate?n.us.prettyTimeFromDate(n.exam.executionDate):"",""),e.xp6(6),e.Oqu(n.exam.examination.name),e.xp6(7),e.Oqu(n.us.labStatusToText(n.exam.status)),e.xp6(6),e.Oqu(n.exam.labTechnicianName),e.xp6(6),e.Oqu(n.exam.labSupervisorName),e.xp6(5),e.Q6J("value",n.exam.doctorNotes),e.xp6(2),e.Oqu(3==n.exam.status?"Cancellation notes:":0==n.exam.status?"Result / Cancellation notes:":"Result:"),e.xp6(1),e.Q6J("readonly",!n.editable||n.exam.status>2)("ngModel",n.labNotes),e.xp6(1),e.Q6J("ngIf",n.editable&&n.exam.status<2),e.xp6(1),e.Q6J("ngIf",n.editable&&n.exam.status<2))},directives:[a.Fj,a.JJ,a.On,i.O5],styles:[""]}),o})();function E(o,r){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&o){const t=e.oxw();let n;e.xp6(1),e.hij(" No such examinations for ",t.us.labStatusToText(null==(n=t.form.get("filter"))?null:n.value)," ")}}function N(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"li",12)(1,"div",13),e._uU(2),e.qZA(),e.TgZ(3,"div",13),e._uU(4),e.qZA(),e.TgZ(5,"div",13),e._uU(6),e.qZA(),e.TgZ(7,"div",13)(8,"button",14),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw().selectExamination(p)}),e._uU(9),e.qZA()()()}if(2&o){const t=r.$implicit,n=e.oxw();e.xp6(2),e.Oqu(n.us.prettyTimeFromDate(t.orderDate)),e.xp6(2),e.Oqu(t.doctorNotes?t.doctorNotes:"No notes"),e.xp6(2),e.Oqu(t.examination.name),e.xp6(3),e.Oqu(0==t.status?"Begin":"Details")}}function L(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"app-lab-tech-details",15),e.NdJ("activeChange",function(u){return e.CHM(t),e.oxw().overlayActive=u})("statusChange",function(){return e.CHM(t),e.oxw().getList()}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("active",t.overlayActive)("exam",t.selectedExamination)("editable",!0)}}const O=[{path:"",component:m,children:[{path:"supervisor",component:A},{path:"technician",component:(()=>{class o{constructor(t,n){this.es=t,this.us=n,this.overlayActive=!1,this.form=new a.cw({filter:new a.NI(0,a.kI.required)})}ngOnInit(){this.form.controls.filter.setValue(0,{onlySelf:!0}),this.form.controls.filter.updateValueAndValidity(),this.getList()}getList(){var t,n,u;this.form.valid&&(this.es.getLabExams(null===(t=this.form.get("filter"))||void 0===t?void 0:t.value).subscribe(p=>{this.examinations=p.reverse(),this.examinations.forEach((g,h,b)=>{b[h].orderDate=this.us.localizeDate(g.orderDate),g.executionDate&&(b[h].executionDate=this.us.localizeDate(g.orderDate))})}),console.log(`Getting elements for date ${null===(n=this.form.get("date"))||void 0===n?void 0:n.value} and filter ${null===(u=this.form.get("filter"))||void 0===u?void 0:u.value}`))}selectExamination(t){this.selectedExamination=t,this.overlayActive=!0}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.C),e.Y36(d.t))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-technician"]],hostAttrs:[1,"grow","flex","flex-col"],decls:28,vars:9,consts:[[3,"title"],[1,"p-10","grow","flex","flex-col"],[1,"w-full"],[1,"flex","items-baseline",3,"formGroup","change"],["for","radios",1,"mr-2"],["id","radios",1,"space-x-2"],["type","radio","formControlName","filter",3,"value"],[1,"mt-4","grow","w-full","overflow-y-auto","relative"],[4,"ngIf"],[1,"absolute","top-0","left-0","w-full","divide-y"],["class","flex items-baseline py-2 w-full",4,"ngFor","ngForOf"],[3,"active","exam","editable","activeChange","statusChange",4,"ngIf"],[1,"flex","items-baseline","py-2","w-full"],[1,"w-1/4","min-w-fit","px-1"],["type","button",1,"float-right","font-semibold","text-white","bg-blue-600","px-3","rounded-lg","hover:bg-blue-700","active:bg-blue-800",3,"click"],[3,"active","exam","editable","activeChange","statusChange"]],template:function(t,n){1&t&&(e._UZ(0,"app-navbar",0),e.TgZ(1,"div",1)(2,"div",2)(3,"form",3),e.NdJ("change",function(){return n.getList()}),e.TgZ(4,"label",4),e._uU(5,"Filter:"),e.qZA(),e.TgZ(6,"fieldset",5)(7,"label"),e._UZ(8,"input",6),e.TgZ(9,"span"),e._uU(10," New"),e.qZA()(),e.TgZ(11,"label"),e._UZ(12,"input",6),e.TgZ(13,"span"),e._uU(14," Awaiting Confirmation "),e.qZA()(),e.TgZ(15,"label"),e._UZ(16,"input",6),e.TgZ(17,"span"),e._uU(18," Cancelled"),e.qZA()(),e.TgZ(19,"label"),e._UZ(20,"input",6),e.TgZ(21,"span"),e._uU(22," Finished"),e.qZA()()()()(),e.TgZ(23,"div",7),e.YNc(24,E,2,1,"div",8),e.TgZ(25,"ul",9),e.YNc(26,N,10,4,"li",10),e.qZA()()(),e.YNc(27,L,1,3,"app-lab-tech-details",11)),2&t&&(e.Q6J("title","laboratory examinations"),e.xp6(3),e.Q6J("formGroup",n.form),e.xp6(5),e.Q6J("value",0),e.xp6(4),e.Q6J("value",2),e.xp6(4),e.Q6J("value",3),e.xp6(4),e.Q6J("value",4),e.xp6(4),e.Q6J("ngIf",n.examinations&&0==n.examinations.length),e.xp6(2),e.Q6J("ngForOf",n.examinations),e.xp6(1),e.Q6J("ngIf",n.overlayActive))},directives:[v.S,a._Y,a.JL,a.sg,a._,a.Fj,a.JJ,a.u,i.O5,i.sg,U],styles:[""]}),o})()},{path:"**",component:l.J}]}];let J=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[f.Bz.forChild(O)],f.Bz]}),o})();var q=s(4466);let F=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[i.ez,J,q.m,a.UX,a.u5]]}),o})()},7278:(x,_,s)=>{s.d(_,{t:()=>f});var i=s(2083),a=s(2096);let f=(()=>{class e{constructor(){this.labStatuses=["New","In Progress","Awaiting Confirmation","Cancelled","Finished"]}statusToText(l){switch(l){case i.q.CANCELLED:return"Cancelled";case i.q.FINISHED:return"Finished";case i.q.IN_PROGRESS:return"In Progress";case i.q.NEW:return"New"}}labStatusToText(l){return this.labStatuses[l]}prettyDateFromDate(l){return"string"==typeof l&&(l=new Date(l)),null==l?void 0:l.toLocaleDateString(navigator.language,{year:"numeric",month:"2-digit",day:"2-digit"})}prettyTimeFromDate(l){return"string"==typeof l&&(l=new Date(l)),null==l?void 0:l.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"})}localizeDate(l){if(null==l)return null;let c=new Date(l);return c.setHours(c.getHours()+c.getTimezoneOffset()/-60),c}}return e.\u0275fac=function(l){return new(l||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7987:(x,_,s)=>{s.d(_,{n:()=>m});var i=s(2096),a=s(8031),f=s(1498),e=s(9808);let m=(()=>{class l{constructor(d,v){this.accountService=d,this.router=v,this.column=!1,this.afterLogoutURL="login"}ngOnInit(){}logoutUser(){this.accountService.logoutUser(),this.router.navigateByUrl(this.afterLogoutURL)}getUserName(){return null==this.user&&(this.accountService.currentUser$.subscribe(d=>this.user=d),null==this.user)?"Lucia Fernandez":this.user.username}}return l.\u0275fac=function(d){return new(d||l)(i.Y36(a.B),i.Y36(f.F0))},l.\u0275cmp=i.Xpm({type:l,selectors:[["app-account-controls"]],inputs:{column:"column"},decls:5,vars:2,consts:[[1,"font-normal","text-gray-500",3,"ngClass"],[3,"click"]],template:function(d,v){1&d&&(i.TgZ(0,"div",0)(1,"p"),i._uU(2),i.qZA(),i.TgZ(3,"button",1),i.NdJ("click",function(){return v.logoutUser()}),i._uU(4,"Log Out"),i.qZA()()),2&d&&(i.Q6J("ngClass",v.column?"":"flex space-x-4"),i.xp6(2),i.Oqu(v.getUserName()))},directives:[e.mk],styles:[""]}),l})()},2083:(x,_,s)=>{s.d(_,{q:()=>i});var i=(()=>{return(a=i||(i={}))[a.NEW=0]="NEW",a[a.IN_PROGRESS=1]="IN_PROGRESS",a[a.CANCELLED=2]="CANCELLED",a[a.FINISHED=3]="FINISHED",i;var a})()},4466:(x,_,s)=>{s.d(_,{m:()=>e});var i=s(9808),a=s(4182),f=s(2096);let e=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=f.oAB({type:m}),m.\u0275inj=f.cJS({imports:[[i.ez,a.u5]]}),m})()}}]);