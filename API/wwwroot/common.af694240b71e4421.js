"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[592],{3578:(f,x,i)=>{i.d(x,{C:()=>v});var e=i(520),_=i(1816),b=i(8929),h=i(2096),d=i(8031);let v=(()=>{class l{constructor(o,t){this.http=o,this.as=t,this.baseURL="http://"+location.hostname,this.queryAllLabExamsURL=this.baseURL+"/v1/Lab/status",this.updateLabExamURL=this.baseURL+"/v1/Lab/",this.queryExaminationTypesURL=this.baseURL+"/v1/Lab/examination-types/q",this.createExaminationTypeURL=this.baseURL+"/v1/Examination",this.getVisitLabExamsURL=this.baseURL+"/v1/Visits/lab-examinations/",this.getVisitPhysExamsURL=this.baseURL+"/v1/Visits/physical-examinations/",this.createVisitPhysExamURL=this.baseURL+"/v1/Doctors/{id}/visits/phy-tests",this.createVisitLabExamURL=this.baseURL+"/v1/Doctors/{id}/visits/lab-tests"}getLabExams(o){let n,t=new e.LE;return t=t.append("status",o),this.as.currentUser$.subscribe(s=>n=null==s?void 0:s.token),this.http.get(this.queryAllLabExamsURL,{headers:new e.WM({"Content-Type":"text/plain",Authorization:"Bearer "+n}),params:t})}postLabExam(o,t,n,s){let a;this.as.currentUser$.subscribe(u=>a=null==u?void 0:u.token);var c=new b.xQ;let p;return p=3==s?{status:s,labTestStatus:0,labNotes:t||null,cancelationReason:n}:{status:s,labTestStatus:0,labNotes:t,cancelationReason:null},this.http.put(this.updateLabExamURL+o.toString(),p,{headers:new e.WM({"Content-Type":"application/json-patch+json",Authorization:"Bearer "+a})}).subscribe({next:u=>{console.log("Lab Examination updated"),c.next(!0)},error:u=>{console.error("There was an error!",u),c.next(!1)}}),c.asObservable()}getVisitPhysicals(o){let t;return this.as.currentUser$.subscribe(n=>t=null==n?void 0:n.token),this.http.get(this.getVisitPhysExamsURL+o.toString(),{headers:new e.WM({"Content-Type":"text/plain",Authorization:"Bearer "+t})})}getVisitLaboratory(o){let t;return this.as.currentUser$.subscribe(n=>t=null==n?void 0:n.token),this.http.get(this.getVisitLabExamsURL+o.toString(),{headers:new e.WM({"Content-Type":"text/plain",Authorization:"Bearer "+t})})}addVisitPhysical(o,t,n){let s;this.as.currentUser$.subscribe(r=>s=null==r?void 0:r.token);const a={results:t,visitsId:o,examinationListId:n};let c;this.as.currentUser$.subscribe(r=>c=Number((0,_.Z)(null==r?void 0:r.token).UserId));const p=this.createVisitPhysExamURL.replace("{id}",c);var u=new b.xQ;return this.http.post(p,a,{headers:new e.WM({"Content-Type":"application/json-patch+json",Authorization:"Bearer "+s})}).subscribe({next:r=>{console.log("Lab Examination updated"),u.next(!0)},error:r=>{console.error("There was an error!",r),u.next(!1)}}),u.asObservable()}addVisitLaboratory(o,t,n){let s;this.as.currentUser$.subscribe(m=>s=null==m?void 0:m.token);let a=new Date;a.setHours(a.getHours()+a.getTimezoneOffset()/-60);const c={status:0,orderDate:a,doctorNotes:t,examinationListId:n,visitsId:o};let p;this.as.currentUser$.subscribe(m=>p=Number((0,_.Z)(m.token).UserId));const u=this.createVisitLabExamURL.replace("{id}",p);var r=new b.xQ;return this.http.post(u,c,{headers:new e.WM({"Content-Type":"application/json-patch+json",Authorization:"Bearer "+s})}).subscribe({next:m=>{console.log("Lab Examination updated"),r.next(!0)},error:m=>{console.error("There was an error!",m),r.next(!1)}}),r.asObservable()}physTypeSearch(o){let s,t=new e.LE;return t=-1==o.search(/([\dEV]\d{2,4})|([A-Za-z]\d{2}[a-zA-Z0-9]{0,4})/gm)?t.append("name",o):t.append("icd",o),t=t.append("type",0),this.as.currentUser$.subscribe(a=>s=null==a?void 0:a.token),console.log(`Querying for ${t}`),this.http.get(this.queryExaminationTypesURL,{headers:new e.WM({"Content-Type":"text/plain",Authorization:"Bearer "+s}),params:t})}labTypeSearch(o){let s,t=new e.LE;return t=-1==o.search(/([\dEV]\d{2,4})|([A-Za-z]\d{2}[a-zA-Z0-9]{0,4})/gm)?t.append("name",o):t.append("icd",o),t=t.append("type",1),this.as.currentUser$.subscribe(a=>s=null==a?void 0:a.token),console.log(`Querying for ${t}`),this.http.get(this.queryExaminationTypesURL,{headers:new e.WM({"Content-Type":"text/plain",Authorization:"Bearer "+s}),params:t})}createType(o){let t;this.as.currentUser$.subscribe(s=>t=null==s?void 0:s.token);var n=new b.xQ;return this.http.post(this.createExaminationTypeURL,o,{headers:new e.WM({"Content-Type":"application/json-patch+json",Authorization:"Bearer "+t})}).subscribe({next:s=>{console.log("Type created"),n.next(!0)},error:s=>{console.error("There was an error creating type!",s),n.next(!1),window.alert("Error: Type creation failed")}}),n.asObservable()}}return l.\u0275fac=function(o){return new(o||l)(h.LFG(e.eN),h.LFG(d.B))},l.\u0275prov=h.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},1279:(f,x,i)=>{i.d(x,{t:()=>o});var e=i(2096),_=i(3578),b=i(7278),h=i(9808),d=i(4182);function v(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"div",17)(1,"label",18),e._uU(2,"Cancellation notes:"),e.qZA(),e.TgZ(3,"textarea",19),e.NdJ("ngModelChange",function(c){return e.CHM(s),e.oxw().cancellationNotes=c}),e.qZA()()}if(2&t){const s=e.oxw();e.xp6(3),e.Q6J("readonly",!s.editable||s.exam.status>2)("ngModel",s.cancellationNotes)}}function l(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){return e.CHM(s),e.oxw().saveChanges(4)}),e._uU(1,"Accept"),e.qZA()}}function g(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){return e.CHM(s),e.oxw().saveChanges(3)}),e._uU(1,"Cancel"),e.qZA()}}let o=(()=>{class t{constructor(s,a){this.es=s,this.us=a,this.activeChange=new e.vpe,this.statusChange=new e.vpe}ngOnInit(){this.cancellationNotes=this.exam.cancelationReason}saveChanges(s){4==s?this.es.postLabExam(this.exam.id,this.exam.labNotes,this.cancellationNotes,s).subscribe(a=>{a&&(this.statusChange.emit(!0),this.closeOverlay())}):3==s&&(null!=this.cancellationNotes&&this.cancellationNotes.length>0?confirm("Please confirm this operation.")&&this.es.postLabExam(this.exam.id,this.exam.labNotes,this.cancellationNotes,s).subscribe(a=>{a&&(this.statusChange.emit(!0),this.closeOverlay())}):window.alert("Please provide reason for cancellation."))}closeOverlay(){this.active=!1,this.activeChange.emit(this.active)}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(_.C),e.Y36(b.t))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-lab-details"]],hostAttrs:[1,"absolute","top-0","left-0","w-full","h-full","z-50"],inputs:{active:"active",exam:"exam",editable:"editable"},outputs:{activeChange:"activeChange",statusChange:"statusChange"},decls:56,vars:14,consts:[[1,"absolute","top-0","left-0","w-full","h-full","backdrop-blur-sm","z-50",3,"click"],[1,"absolute","z-50","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","h-[70%]","w-1/2","min-w-[35rem]","min-h-fit","rounded-md","drop-shadow-lg","bg-gradient-to-b","from-slate-50","via-slate-100","to-blue-300"],[1,"flex","flex-col","w-full","h-full","p-5"],[1,"flex","w-full","justify-between"],[1,"mr-3"],[1,"w-full","grow","flex","flex-col","items-center","justify-center","overflow-y-scroll"],[1,"w-2/3"],["for","docNotes",1,"w-full"],["readonly","","id","docNotes","rows","5","placeholder","Doctor's notes",1,"w-full","resize-none","mb-2","bg-gray-200",3,"value"],[1,"flex","w-full","items-center","justify-center"],[3,"ngClass"],["for","result"],["readonly","","id","result","rows","5","placeholder","Result",1,"w-full","resize-none","bg-gray-200",3,"value"],["class","w-1/2 pl-1",4,"ngIf"],[1,"space-x-4"],["type","button","class","mb-2 font-semibold text-white bg-blue-600 px-6 py-2 rounded-lg hover:bg-blue-700 active:bg-blue-800",3,"click",4,"ngIf"],["type","button","class","mb-2 font-semibold text-white bg-red-600 px-6 py-2 rounded-lg hover:bg-red-700 active:bg-red-800",3,"click",4,"ngIf"],[1,"w-1/2","pl-1"],["for","cancelNotes"],["id","cancelNotes","rows","5","placeholder","Cancellation notes",1,"w-full","resize-none","bg-gray-200",3,"readonly","ngModel","ngModelChange"],["type","button",1,"mb-2","font-semibold","text-white","bg-blue-600","px-6","py-2","rounded-lg","hover:bg-blue-700","active:bg-blue-800",3,"click"],["type","button",1,"mb-2","font-semibold","text-white","bg-red-600","px-6","py-2","rounded-lg","hover:bg-red-700","active:bg-red-800",3,"click"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return a.closeOverlay()}),e.qZA(),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"table")(5,"tr")(6,"td")(7,"span",4),e._uU(8,"Requested on:"),e.qZA()(),e.TgZ(9,"td"),e._uU(10),e.qZA()(),e.TgZ(11,"tr")(12,"td")(13,"span",4),e._uU(14,"Finalized on:"),e.qZA()(),e.TgZ(15,"td"),e._uU(16),e.qZA()(),e.TgZ(17,"tr")(18,"td")(19,"span",4),e._uU(20,"Type:"),e.qZA()(),e.TgZ(21,"td"),e._uU(22),e.qZA()()(),e.TgZ(23,"table")(24,"tr")(25,"td")(26,"span",4),e._uU(27,"Status:"),e.qZA()(),e.TgZ(28,"td"),e._uU(29),e.qZA()(),e.TgZ(30,"tr")(31,"td")(32,"span",4),e._uU(33,"Technician:"),e.qZA()(),e.TgZ(34,"td"),e._uU(35),e.qZA()(),e.TgZ(36,"tr")(37,"td")(38,"span",4),e._uU(39,"Supervisor:"),e.qZA()(),e.TgZ(40,"td"),e._uU(41),e.qZA()()()(),e.TgZ(42,"div",5)(43,"div",6)(44,"label",7),e._uU(45,"Doctor's Notes:"),e.qZA(),e._UZ(46,"textarea",8),e.qZA(),e.TgZ(47,"div",9)(48,"div",10)(49,"label",11),e._uU(50,"Result:"),e.qZA(),e._UZ(51,"textarea",12),e.qZA(),e.YNc(52,v,4,2,"div",13),e.qZA(),e.TgZ(53,"div",14),e.YNc(54,l,2,0,"button",15),e.YNc(55,g,2,0,"button",16),e.qZA()()()()),2&s&&(e.xp6(10),e.AsE("",a.us.prettyDateFromDate(a.exam.orderDate)," ",a.us.prettyTimeFromDate(a.exam.orderDate),""),e.xp6(6),e.AsE("",a.exam.executionDate?a.us.prettyDateFromDate(a.exam.executionDate):"N/A"," ",a.exam.executionDate?a.us.prettyTimeFromDate(a.exam.executionDate):"",""),e.xp6(6),e.Oqu(a.exam.examination.name),e.xp6(7),e.Oqu(a.us.labStatusToText(a.exam.status)),e.xp6(6),e.Oqu(a.exam.labTechnicianName),e.xp6(6),e.Oqu(a.exam.labSupervisorName),e.xp6(5),e.Q6J("value",a.exam.doctorNotes),e.xp6(2),e.Q6J("ngClass",4==a.exam.status?"w-2/3":"w-1/2 pr-1"),e.xp6(3),e.Q6J("value",a.exam.labNotes),e.xp6(1),e.Q6J("ngIf",a.exam.status<4),e.xp6(2),e.Q6J("ngIf",a.editable&&a.exam.status<3),e.xp6(1),e.Q6J("ngIf",a.editable&&a.exam.status<3))},directives:[h.mk,h.O5,d.Fj,d.JJ,d.On],styles:[""]}),t})()},4696:(f,x,i)=>{i.d(x,{S:()=>h});var e=i(2096),_=i(7987),b=i(9808);let h=(()=>{class d{constructor(){}ngOnInit(){}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-navbar"]],hostAttrs:[1,"w-full","flex","justify-between","items-baseline","py-2","px-6","bg-white","border-b","border-gray-200"],inputs:{title:"title"},decls:6,vars:3,consts:[[1,"text-xl","font-medium"]],template:function(l,g){1&l&&(e.TgZ(0,"div")(1,"h2",0),e._uU(2),e.ALo(3,"titlecase"),e.qZA()(),e.TgZ(4,"div"),e._UZ(5,"app-account-controls"),e.qZA()),2&l&&(e.xp6(2),e.Oqu(e.lcZ(3,1,g.title)))},directives:[_.n],pipes:[b.rS],styles:[""]}),d})()}}]);